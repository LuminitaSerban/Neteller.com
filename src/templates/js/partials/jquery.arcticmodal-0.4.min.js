!function(e){var a={type:"html",content:"",url:"",ajax:{},ajax_request:null,closeOnEsc:!0,closeOnOverlayClick:!0,clone:!1,overlay:{block:void 0,tpl:'<div class="arcticmodal-overlay"></div>',css:{backgroundColor:"#000",opacity:.6}},container:{block:void 0},wrap:void 0,body:void 0,errors:{tpl:'<div class="arcticmodal-error arcticmodal-close"></div>',autoclose_delay:2e3,ajax_unsuccessful_load:"Error"},openEffect:{type:"fade",speed:400},closeEffect:{type:"fade",speed:400},beforeOpen:e.noop,afterOpen:e.noop,beforeClose:e.noop,afterClose:e.noop,afterLoading:e.noop,afterLoadingOnShow:e.noop,errorLoading:e.noop},o=0,r=e([]),t={getParentEl:function(a){var o=e(a);return o.data("arcticmodal")?o:(o=e(a).closest(".arcticmodal-container").data("arcticmodalParentEl"))||!1},transition:function(a,o,r,t){switch(t=void 0==t?e.noop:t,r.type){case"fade":"show"==o?a.fadeIn(r.speed,t):a.fadeOut(r.speed,t);break;case"none":"show"==o?a.show():a.hide(),t()}},prepare_body:function(a,o){e(".arcticmodal-close",o).unbind("click.arcticmodal").bind("click.arcticmodal",function(){return o.arcticmodal("close"),!1})},init_el:function(a,i){var n=a.data("arcticmodal");if(!n){o++,(n=i).modalID=o,n.overlay.block=e(n.overlay.tpl),n.overlay.block.css(n.overlay.css),n.container.block=a,n.body=e(".arcticmodal-container_table",n.container.block),t.prepare_body(n,a);var l=a.closest(".arcticmodal-container");if(n.closeOnOverlayClick&&e(l).click(function(e){0===a.has(e.target).length&&a.arcticmodal("close")}),n.container.block.data("arcticmodalParentEl",a),a.data("arcticmodal",n),r=e.merge(r,a),e.proxy(c.show,a)(),"html"==n.type)return a;if(void 0!=n.ajax.beforeSend){var d=n.ajax.beforeSend;delete n.ajax.beforeSend}if(void 0!=n.ajax.success){var s=n.ajax.success;delete n.ajax.success}if(void 0!=n.ajax.error){var f=n.ajax.error;delete n.ajax.error}var u=e.extend(!0,{url:n.url,beforeSend:function(){void 0==d?n.body.html('<div class="arcticmodal-loading" />'):d(n,a)},success:function(e){a.trigger("afterLoading"),n.afterLoading(n,a,e),void 0==s?n.body.html(e):s(n,a,e),t.prepare_body(n,a),a.trigger("afterLoadingOnShow"),n.afterLoadingOnShow(n,a,e)},error:function(){a.trigger("errorLoading"),n.errorLoading(n,a),void 0==f?(n.body.html(n.errors.tpl),e(".arcticmodal-error",n.body).html(n.errors.ajax_unsuccessful_load),e(".arcticmodal-close",n.body).click(function(){return a.arcticmodal("close"),!1}),n.errors.autoclose_delay&&setTimeout(function(){a.arcticmodal("close")},n.errors.autoclose_delay)):f(n,a)}},n.ajax);n.ajax_request=e.ajax(u),a.data("arcticmodal",n)}},init:function(o){if(!e(this).is(":visible")){if(o=e.extend(!0,{},a,o),!e.isFunction(this))return this.each(function(){t.init_el(e(this),e.extend(!0,{},o))});if(void 0!=o)if(""!=o.type)switch(o.type){case"html":if(""==o.content)return void e.error('jquery.arcticmodal: Don\'t set parameter "content"');var r=o.content;return o.content="",t.init_el(e(r),o);case"ajax":return""==o.url?void e.error('jquery.arcticmodal: Don\'t set parameter "url"'):t.init_el(e("<div />"),o)}else e.error('jquery.arcticmodal: Don\'t set parameter "type"');else e.error("jquery.arcticmodal: Uncorrect parameters")}}},c={show:function(){var a=t.getParentEl(this);if(!1!==a){var o=a.data("arcticmodal"),c=o.container.block.closest(".arcticmodal-container");if(o.overlay.block.hide(),c.hide(),c.before(o.overlay.block),o.beforeOpen(o,a),a.trigger("beforeOpen"),"hidden"!==o.wrap.css("overflow")){o.wrap.data("arcticmodalOverflow",o.wrap.css("overflow"));var i=o.wrap.outerWidth(!0);o.wrap.css("overflow","hidden");var n=o.wrap.outerWidth(!0);n!==i&&o.wrap.css("marginRight",n-i+"px")}return r.not(a).each(function(){var a=e(this).closest(".arcticmodal-container"),o=a.css("z-index"),r=--o;a.css("z-index",r),a.prev(".arcticmodal-overlay").css("z-index",r)}),r.not(a).each(function(){e(this).data("arcticmodal").overlay.block.closest(".arcticmodal-container").hide()}),t.transition(o.overlay.block,"show",r.length>1?{type:"none"}:o.openEffect),t.transition(c,"show",r.length>1?{type:"none"}:o.openEffect,function(){o.afterOpen(o,a),a.trigger("afterOpen"),e(window).trigger("arcticmodal.afterOpen")}),a}e.error("jquery.arcticmodal: Uncorrect call")},close:function(){if(!e.isFunction(this))return this.each(function(){var a=t.getParentEl(this);if(!1!==a){var o=a.data("arcticmodal"),c=o.container.block.closest(".arcticmodal-container");!1!==o.beforeClose(o,a)&&(a.trigger("beforeClose"),c.css("z-index",""),c.prev(".arcticmodal-overlay").css("z-index",""),t.transition(o.overlay.block,"hide",o.closeEffect),t.transition(c,"hide",o.closeEffect,function(){o.afterClose(o,a),a.trigger("afterClose"),e(window).trigger("arcticmodal.afterClose"),o.clone||e("#arcticmodalReserve"+o.modalID).replaceWith(o.body.find(">*")),o.overlay.block.remove(),a.data("arcticmodal",null),e(".arcticmodal-container").length>=1&&(o.wrap.data("arcticmodalOverflow")&&o.wrap.css("overflow",o.wrap.data("arcticmodalOverflow")),o.wrap.css("marginRight",0))}),"ajax"===o.type&&o.ajax_request.abort(),r=r.not(a))}else e.error("jquery.arcticmodal: Uncorrect call")});r.each(function(){e(this).arcticmodal("close")})},setDefault:function(o){e.extend(!0,a,o)}};e(function(){a.wrap=e(document.all&&!document.querySelector?"html":"body")}),e(document).bind("keyup.arcticmodal",function(e){var a=r.last();if(a.length){a.data("arcticmodal").closeOnEsc&&27===e.keyCode&&a.arcticmodal("close")}}),e.arcticmodal=e.fn.arcticmodal=function(a){return c[a]?c[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void e.error("jquery.arcticmodal: Method "+a+" does not exist"):t.init.apply(this,arguments)}}(jQuery);